###Schema###
###Data###
t_subs(t_person,t_entity).
t_subs(t_organisation,t_entity).
t_subs(t_employment,t_relation).
t_subs(t_coworkers,t_relation).

t_hasattr(t_person,name).
t_hasattr(t_organisation,name).

t_playsrole(t_person,employee).
t_playsrole(t_organisation,employer).

t_relates(t_employment,employee).
t_relates(t_employment,employer).

instanceof(e_1,t_person).
instanceof(e_2,t_person).
instanceof(e_3,t_organisation).

instanceattr(e_1,name,str_Bob).
instanceattr(e_2,name,str_Alice).
instanceattr(e_3,name,str_Uni).

instanceof(_,t_employment) :- instanceof(Org,t_organisation), instanceattr(Org,name,str_Uni), instanceof(Person,t_person).


query1(X) :- instanceof(X,t_person), instanceattr(X,name,str_Bob).
query2_b6hhds78adg8sa_8d7sga8da7s8_hsa8dsahday(X,Y,Z) :- instanceof(X,t_employment), instancerel(X,employee,Y), instancerel(X,employer,Z).
query3(X) :- instanceof(X,t_employment).
###Test###
query1(X).
query2_b6hhds78adg8sa_8d7sga8da7s8_hsa8dsahday(X,Y,Z).
query3(X).

%match(X,[(isa,t_person),(has,name,"Bob")]).
%match(Var,[(isa,t_employment),(relates,employee,X),(relates,employer,Y)]).



%
% match
%    $org isa organisation, has name "Uni";
%    $person isa person, has name "Alice";
% insert $new-employment (employer: $org, employee: $person) isa employment;
%    $new-employment has reference-id "WGFTSH"; ///kinda won't work in this impl.
%
